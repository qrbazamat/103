import{r,A as m,j as a,a4 as L,v as _,w as D,L as I,u as B,E as b,C as z}from"./index-aiToVYxB.js";import{B as G}from"./Banner-q2aHT_zl.js";import{S as A}from"./SecondaryLogo-hOelgVcb.js";import{P as M}from"./index-PvytoHy6.js";import{L as w,a as y}from"./axios-VhRKQKmJ.js";import{O as N}from"./fancybox-hRH1fn40.js";import{a as O}from"./formatFunctions-qHelEa9W.js";import{E as R}from"./Error--wgnwUXC.js";import"./index-Nop-sfen.js";import"./index-nE-tKaZ0.js";/* empty css              */const F=({post:e,id:d})=>{var x;const[l,n]=r.useState([]),[c,i]=r.useState(!1),o=()=>{i("loading"),y.get(`${m}api/pictures/${d}`).then(t=>{n(t.data.data),i(!1)}).catch(t=>{n([]),i(t.message)})};return r.useEffect(()=>{l.length>0&&N.show(l.map(t=>({src:`${m}${t==null?void 0:t.link}`,type:"image"})))},[c]),a.jsxs("article",{className:"[&:hover_img]:scale-105 flex h-full transition duration-200 my-post rounded-3xl",children:[a.jsx("span",{className:"absolute h-8 w-8 left-3 top-3 bg-gray-200/75 flex justify-center items-center z-50 text-white1 rounded-lg p-1",children:a.jsx(L,{className:"h-6"})}),a.jsxs("div",{className:"*:w-full rounded-2xl flex flex-col items-center gap-1 lg:gap-1.5 min-[1400px]:gap-2 relative",children:[a.jsxs("div",{className:"aspect-[4/3] rounded-xl w-full relative overflow-hidden shadow-md",onClick:()=>{l.length===0?o():N.show(l.map(t=>({src:`${m}${t==null?void 0:t.link}`,type:"image"})))},children:[a.jsx("img",{src:`${m}${(x=e==null?void 0:e.photo)==null?void 0:x.name}`,alt:e==null?void 0:e.title,className:"transition duration-200 w-full h-full object-cover"}),a.jsx("h1",{className:"font-semibold h-[68px] max-sm:text-[12px] max-md:text-xs text-sm line-clamp-3 absolute left-1.5 bottom-1.5 right-1.5 p-1 rounded-md bg-gray-100/50 backdrop-blur-sm",children:e==null?void 0:e.title})]}),a.jsxs("div",{className:"text-[--MainBlueColor] mt-auto flex items-center gap-2",children:[a.jsx(_,{className:"shrink-0 h-[18px]"}),new Date(e==null?void 0:e.created_at).toLocaleDateString(),a.jsxs("span",{className:"ml-auto flex items-center gap-2 shrink-0",children:[a.jsx(D,{className:"shrink-0 h-5"}),O.format(e==null?void 0:e.view_count)]})]})]}),c==="loading"&&a.jsx("div",{className:"absolute z-50 rounded-md w-full left-0 top-0 h-5/6 grid place-content-center",children:a.jsx(w,{})})]})},Z=r.memo(()=>{var f,j;const[e,d]=r.useState([]),[l,n]=r.useState("loading"),{navbar:[,,{links:[,{text:c}],title:i}],lang:o}=r.useContext(I),[x,t]=B(),h=Math.ceil((e==null?void 0:e.total)/(e==null?void 0:e.per_page)),u=x.get("page")*1,v=()=>{n("loading"),y.get(`${m}api/pictures?lang=${o}&page=${u}`).then(s=>{d(s.data.data),n(!1)}).catch(s=>{d([]),n(s.message)})};r.useEffect(()=>{v()},[o,u]),r.useEffect(()=>{u||t(s=>(s.set("page",1),s))},[]);const $=s=>{s>0&&s<=h&&t(g=>(g.set("page",s),g))},P=[{label:i,link:"/axborot-xizmati"},{label:c,link:"/"}];return a.jsxs("section",{children:[a.jsx(b,{children:a.jsx(G,{items:P,text:i})}),a.jsxs(z,{className:"py-2 sm:py-4 md:py-6",children:[a.jsx(b,{children:a.jsx(A,{title:c})}),l==="loading"?a.jsx(w,{}):l?a.jsx(R,{message:l}):((f=e==null?void 0:e.data)==null?void 0:f.length)===0?a.jsx(NoData,{lang:o}):a.jsxs(a.Fragment,{children:[a.jsx("section",{className:"p-3 grid min-[460px]:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 mb-8",children:(j=e==null?void 0:e.data)==null?void 0:j.map((s,g)=>{const{id:p,photo:k,title:S,created_at:E,view_count:C}=s||{};return a.jsx("div",{className:"shadow-xl relative border p-2 -m-2 rounded-2xl transition hover:scale-[103%] cursor-pointer",children:a.jsx(F,{post:{photo:k,title:S,created_at:E,view_count:C},id:p})},`${g}.${p}`)})}),a.jsx(M,{currentPage:u,totalPages:h,onPageChange:$})]})]})]})});export{Z as default};
